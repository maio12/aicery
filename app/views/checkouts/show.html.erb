<div class="navbar-aicery">
  <%= link_to url_for(:back) do %>
    <i class="fas fa-arrow-left"></i>
  <% end %>
  <p>My Deals</p>
  <%= link_to list_path(@list) do %>
    <i class="fas fa-shopping-cart"></i>
      <% if @list.items.count.positive? %>
        <p class="notification"><%= @list.items.sum(:quantity)%></p>
      <% else %>
        <p class="notification-hidden"><%= @list.items.sum(:quantity)%></p>
      <% end %>
  <% end %>
</div>

<div
  id="map"
  style="width: 100%;
  height: 250px;"

  data-markers-cheapest="<%= @marker_cheapest.to_json %>"
  data-markers-nearest="<%= @marker_nearest.to_json %>"
  data-markers-user = "<%=  @marker_user.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
></div>
<br>

<%= link_to list_supermarket_path(@list, @cheapest) do %>
  <div class="show-card">
    <h3>Cheapest Deal</h3>
    <div class="buttons_map">

      <div class="buttons_inside_map"><%= @cheapest&.name %></div>
      <div class="buttons_inside_map"><%= humanized_money_with_symbol(@cheapest&.basket_total_price(@list.basket_checkout)) %></div>
      <div class="buttons_inside_map"><%= @cheapest&.total_matches(@product_ids) %></div>
    </div>
  </div>
<% end %>

<% if params["lat"].present?%>
  <br>
  <%= link_to list_supermarket_path(@list, @nearest) do %>
    <div class="show-card">
      <h3>Nearest Deal</h3>
      <div class="buttons_map">
        <div class="buttons_inside_map"> <%= @nearest&.name %></div>
        <div class="buttons_inside_map"><%= humanized_money_with_symbol(@nearest&.basket_total_price(@list.basket_checkout)) %></div>
        <div class="buttons_inside_map"><%= @nearest&.total_matches(@product_ids) %></div>
      </div>
    </div>
  <% end %>
<% end %>
